<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <link rel="icon" href="../images/icon192.png">
    <title>List of Objects </title>

  <style>
    body { max-width: 500px; }
    #inp { white-space: pre-wrap; }
    #sample { overflow-x: auto; }
    #out { color: blue; }
  </style>
</head>

<body>

<h2 id=title></h2>
<b>Text input &emsp;
<input type=button id=convert value=Convert onclick="toList()">
</b>
<p>
  <textarea id=inp onchange="convert.disabled=false" rows=10 cols=50 >
  </textarea>
</p>
<b>JSON output</b>
<pre id=out></pre>
<hr />
<b>Sample code</b>
<pre id=sample></pre>
<hr />
<p>
    <a href="github.com">
        <img alt="Link to Photo" src="https://github.com/kislakba/Advanced-Programming-Techniques-Course-2020-2021/blob/main/ssfoclasswork4.png"
        width="450" height="170">
     </a>
</p>
<p>Ref: 
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters#Examples" 
   target="NewTab">Rest Parameters</a>
</p>

<script>
"use strict";
function toList(str) {
  function toObject(x) {
    let b = {}
    for (let [i,s] of x.split('\t').entries())
      b[keys[i]] = (isNaN(s)? s : Number(s))
    return b
  }
    if (str) inp.value = str
    else str = inp.value
    convert.disabled = true
    let [d0, ...data] = str.split('\n')
    let keys = d0.split('\t')
    console.log("Keys:", keys)
    let a = data.map(toObject)
    a = a.filter(x => x.Units>0)
    a = a.sort()
    a = a.reverse()
    a.push({"OrderDate": "20/10/20","Region":"West","Rep":"Baris" ,"Item":"Pencil" ,"Units":1414,"Unit Cost":14.14,"Total":10000})
    out.innerText = JSON.stringify(a, '' ,2)
    console.table(a)
    return a
}
function biggest(x) {
  return x >= 15;
}
const PLANET = 
`Name	Diam	Mass	Radius	Period
Mercury	0.382	0.06	0.40	0.24
Venus	0.949	0.82	0.72	0.62
Earth	1.000	1.00	1.00	1.00
Mars	0.532	0.11	1.52	1.88
Jupiter	11.209	317.80	5.20	11.86
Saturn	9.449	95.20	9.54	29.46
Uranus	4.007	14.60	19.22	84.01
Neptune	3.883	17.20	30.06	164.80
Baris12	0.14	0.41	3.72	6.88
Jupiter	11.209	317.80	5.20	11.86
Saturn	9.449	95.20	9.54	29.46
Uranus	4.007	14.60	19.22	84.01
Neptune	3.883	17.20	30.06	164.80`,

MOUNT = `OrderDate	Region	Rep	Item	Units	Unit Cost	Total
1/6/19	East	Jones	Pencil	95	 1.99 	 189.05 
1/23/19	Central	Kivell	Binder	50	 19.99 	 999.50 
2/9/19	Central	Jardine	Pencil	36	 4.99 	 179.64 
2/26/19	Central	Gill	Pen	27	 19.99 	 539.73 
3/15/19	West	Sorvino	Pencil	56	 2.99 	 167.44 
4/1/19	East	Jones	Binder	60	 4.99 	 299.40 
4/18/19	Central	Andrews	Pencil	75	 1.99 	 149.25 
5/5/19	Central	Jardine	Pencil	90	 4.99 	 449.10 
5/22/19	West	Thompson	Pencil	32	 1.99 	 63.68 
6/8/19	East	Jones	Binder	60	 8.99 	 539.40 
6/25/19	Central	Morgan	Pencil	90	 4.99 	 449.10 
7/12/19	East	Howard	Binder	29	 1.99 	 57.71 
7/29/19	East	Parent	Binder	81	 19.99 	 1,619.19 
8/15/19	East	Jones	Pencil	35	 4.99 	 174.65 
9/1/19	Central	Smith	Desk	-12	 125.00 	 250.00 
9/18/19	East	Jones	Pen Set	16	 15.99 	 255.84 
10/5/19	Central	Morgan	Binder	28	 8.99 	 251.72 
10/22/19	East	Jones	Pen	64	 8.99 	 575.36 
11/8/19	East	Parent	Pen	15	 19.99 	 299.85 
11/25/19	Central	Kivell	Pen Set	96	 4.99 	 479.04 
12/12/19	Central	Smith	Pencil	67	 1.29 	 86.43 
12/29/19	East	Parent	Pen Set	74	 15.99 	 1,183.26 
1/15/20	Central	Gill	Binder	46	 8.99 	 413.54 
2/1/20	Central	Smith	Binder	87	 15.00 	 1,305.00 
2/18/20	East	Jones	Binder	-4	 4.99 	 19.96 `

    title.innerText = document.title
    sample.innerText = toList
    inp.value = MOUNT
    //toList()  //array of objects
</script>

</body>
</html>